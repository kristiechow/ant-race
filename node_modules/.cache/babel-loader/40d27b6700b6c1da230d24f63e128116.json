{"ast":null,"code":"var _jsxFileName = \"/Users/kristie/Desktop/antrace/src/pages/LandingPage/components/Main/index.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { RowFlex, ColumnFlex, Screen } from \"../../styles\";\nimport { Picture, HeavyText, LightText } from \"./styles\";\nimport { useTable } from \"react-table\";\nimport Button from \"./Button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Main() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [error, setError] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [ants, setAnts] = useState([]);\n  const [startRaceState, setStartRace] = useState(0);\n  const [getDataClicked, setgetDataClicked] = useState(false);\n  const [raceState, setRaceState] = useState('Not yet run');\n  const [likelihoods, setLikelihoods] = useState([]);\n\n  const onGetDataClick = () => {\n    setgetDataClicked(true);\n    fetch(\"https://sg-ants-server.herokuapp.com/ants\").then(res => res.json()).then(result => {\n      result.ants[0].calculation = 'Not yet run';\n      result.ants[1].calculation = 'Not yet run';\n      result.ants[2].calculation = 'Not yet run';\n      result.ants[3].calculation = 'Not yet run';\n      result.ants[4].calculation = 'Not yet run';\n      result.ants[0].likelihood = 0;\n      result.ants[1].likelihood = 0;\n      result.ants[2].likelihood = 0;\n      result.ants[3].likelihood = 0;\n      result.ants[4].likelihood = 0;\n      setIsLoaded(true);\n      setAnts(Object.keys(result).map(key => result[key])[0]);\n      setgetDataClicked(false);\n    }, error => {\n      setIsLoaded(true);\n      setError(error);\n    });\n  };\n\n  const onStartRaceClick = () => {\n    setRaceState(\"In progress\");\n    console.log(ants);\n  };\n\n  const onconsoleClick2 = () => {\n    console.log(ants);\n  };\n\n  const calculate = ant => {\n    return new Promise(resolve => {\n      resolve(ant);\n    });\n  };\n\n  const getCalculation = (ant, index) => dispatch => {\n    const generateCalculation = generateAntWinLikelihoodCalculator();\n    return generateCalculation(ant => {\n      calculate(ant).then(calculation => {\n        ants[0].calculation = calculation;\n        dispatch(calculation);\n      });\n    });\n  };\n\n  const runCalculation = (ant, index) => (dispatch, getState) => {\n    console.log(\"clicked\");\n    console.log(dispatch(getCalculation(ant, index)));\n    return dispatch(getCalculation(ant, index));\n  };\n\n  function generateAntWinLikelihoodCalculator() {\n    const delay = 7000 + Math.random() * 7000;\n    const likelihoodOfAntWinning = Math.random();\n    return callback => {\n      setTimeout(() => {\n        callback(likelihoodOfAntWinning);\n      }, delay);\n    };\n  }\n\n  const Calculation = _ref => {\n    _s();\n\n    let {\n      ant,\n      index\n    } = _ref;\n    const dispatch = useDispatch();\n    useEffect(() => {\n      if (ant.status === \"in progress\") {\n        dispatch(runCalculation(ant, index));\n      }\n    }, [ant, index, dispatch]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: ants[0].name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }, this);\n  };\n\n  _s(Calculation, \"rAh3tY+Iv6hWC9AI4Dm+rCbkwNE=\", false, function () {\n    return [useDispatch];\n  });\n\n  const data = React.useMemo(() => ants);\n  const columns = React.useMemo(() => [{\n    Header: 'Name',\n    accessor: 'name' // accessor is the \"key\" in the data\n\n  }, {\n    Header: 'Length',\n    accessor: 'length'\n  }, {\n    Header: 'Color',\n    accessor: 'color'\n  }, {\n    Header: 'Weight',\n    accessor: 'weight'\n  }, {\n    Header: 'State of Calcluation',\n    accessor: 'calculation'\n  }], []);\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow\n  } = useTable({\n    columns,\n    data\n  });\n\n  const renderStep = () => {\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Error retrieving ant data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 20\n      }, this);\n    } else if (getDataClicked) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading ant data...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 20\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(RowFlex, {\n        children: /*#__PURE__*/_jsxDEV(ColumnFlex, {\n          children: [/*#__PURE__*/_jsxDEV(RowFlex, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: onGetDataClick,\n              children: \"GET DATA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(RowFlex, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: onStartRaceClick,\n              children: \"START RACE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(RowFlex, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: runCalculation,\n              children: \"console RACE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(RowFlex, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: onconsoleClick2,\n              children: \"console\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(RowFlex, {\n            children: [\"STATE OF THE RACE: \", raceState]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(RowFlex, {\n            children: /*#__PURE__*/_jsxDEV(\"table\", { ...getTableProps(),\n              style: {\n                border: 'solid 1px black'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: headerGroups.map(headerGroup => /*#__PURE__*/_jsxDEV(\"tr\", { ...headerGroup.getHeaderGroupProps(),\n                  children: headerGroup.headers.map(column => /*#__PURE__*/_jsxDEV(\"th\", { ...column.getHeaderProps(),\n                    style: {\n                      background: 'aliceblue',\n                      color: 'black',\n                      fontWeight: 'bold'\n                    },\n                    children: column.render('Header')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", { ...getTableBodyProps(),\n                children: rows.map(row => {\n                  prepareRow(row);\n                  return /*#__PURE__*/_jsxDEV(\"tr\", { ...row.getRowProps(),\n                    children: row.cells.map(cell => {\n                      return /*#__PURE__*/_jsxDEV(\"td\", { ...cell.getCellProps(),\n                        style: {\n                          padding: '10px'\n                        },\n                        children: cell.render('Cell')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 196,\n                        columnNumber: 33\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 29\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(RowFlex, {\n            children: /*#__PURE__*/_jsxDEV(Calculation, {\n              ant: ants[0],\n              index: 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Screen, {\n    children: renderStep()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 222,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(Main, \"bGFEy6roQpBplvtfKJbrhPwZbXU=\", false, function () {\n  return [useTable];\n});\n\n_c = Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["/Users/kristie/Desktop/antrace/src/pages/LandingPage/components/Main/index.js"],"names":["React","useState","useEffect","useDispatch","RowFlex","ColumnFlex","Screen","Picture","HeavyText","LightText","useTable","Button","Main","error","setError","isLoaded","setIsLoaded","ants","setAnts","startRaceState","setStartRace","getDataClicked","setgetDataClicked","raceState","setRaceState","likelihoods","setLikelihoods","onGetDataClick","fetch","then","res","json","result","calculation","likelihood","Object","keys","map","key","onStartRaceClick","console","log","onconsoleClick2","calculate","ant","Promise","resolve","getCalculation","index","dispatch","generateCalculation","generateAntWinLikelihoodCalculator","runCalculation","getState","delay","Math","random","likelihoodOfAntWinning","callback","setTimeout","Calculation","status","name","data","useMemo","columns","Header","accessor","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","renderStep","border","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","background","color","fontWeight","render","row","getRowProps","cells","cell","getCellProps","padding"],"mappings":"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","sourcesContent":["import React, { useState, useEffect }  from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { RowFlex, ColumnFlex, Screen } from \"../../styles\";\nimport { Picture, HeavyText, LightText } from \"./styles\";\nimport { useTable } from \"react-table\";\nimport Button from \"./Button\";\n\nexport default function Main() {\n    const [error, setError] = useState(null);\n    const [isLoaded, setIsLoaded] = useState(false);\n    const [ants, setAnts] = useState([]);\n    const [startRaceState, setStartRace] = useState(0);\n    const [getDataClicked, setgetDataClicked] = useState(false);\n    const [raceState, setRaceState] = useState('Not yet run');\n    const [likelihoods, setLikelihoods] = useState([]);\n\n    const onGetDataClick = () => {\n        setgetDataClicked(true);\n        fetch(\"https://sg-ants-server.herokuapp.com/ants\")\n          .then(res => res.json())\n          .then(\n            (result) => {\n              result.ants[0].calculation = 'Not yet run';\n              result.ants[1].calculation = 'Not yet run';\n              result.ants[2].calculation = 'Not yet run';\n              result.ants[3].calculation = 'Not yet run';\n              result.ants[4].calculation = 'Not yet run';\n\n              result.ants[0].likelihood = 0;\n              result.ants[1].likelihood = 0;\n              result.ants[2].likelihood = 0;\n              result.ants[3].likelihood = 0;\n              result.ants[4].likelihood = 0;\n\n              setIsLoaded(true);\n              setAnts(Object.keys(result).map((key) => result[key])[0]);\n              setgetDataClicked(false);\n\n            },\n            (error) => {\n              setIsLoaded(true);\n              setError(error);\n            }\n        )\n    }\n\n    const onStartRaceClick = () => {\n        setRaceState(\"In progress\");\n        console.log(ants)\n      };\n\n    const onconsoleClick2 = () => {\n      console.log(ants);\n    };\n    \n    const calculate = (ant) => {\n      return new Promise((resolve) => {\n        resolve(ant);\n      });\n    };\n    \n    const getCalculation = (ant, index) => (dispatch) => {\n      const generateCalculation = generateAntWinLikelihoodCalculator();\n    \n      return generateCalculation((ant) => {\n        calculate(ant).then((calculation) => {\n          ants[0].calculation = calculation;\n          dispatch(calculation);\n        });\n      });\n    };\n    \n    const runCalculation = (ant, index) => (dispatch, getState) => {\n        console.log(\"clicked\");\n        console.log(dispatch(getCalculation(ant, index)));\n        return dispatch(getCalculation(ant, index));\n  \n    };\n        \n      function generateAntWinLikelihoodCalculator() {\n        const delay = 7000 + Math.random() * 7000;\n        const likelihoodOfAntWinning = Math.random();\n      \n        return (callback) => {\n          setTimeout(() => {\n            callback(likelihoodOfAntWinning);\n          }, delay);\n        };\n      }\n\n\n      const Calculation = ({ ant, index }) => {\n        const dispatch = useDispatch();\n        useEffect(() => {\n          if (ant.status === \"in progress\") {\n            dispatch(runCalculation(ant, index));\n          }\n        }, [ant, index, dispatch]);\n      \n        return (\n          <div>\n            <p>{ants[0].name}</p>\n          </div>\n        );\n      }\n\n    const data = React.useMemo(\n        () => ants\n    )\n\n    const columns = React.useMemo(\n        () => [\n          {\n            Header: 'Name',\n            accessor: 'name', // accessor is the \"key\" in the data\n          },\n          {\n            Header: 'Length',\n            accessor: 'length',\n          },\n          {\n            Header: 'Color',\n            accessor: 'color',\n          },\n          {\n            Header: 'Weight',\n            accessor: 'weight',\n          },\n          {\n            Header: 'State of Calcluation',\n            accessor: 'calculation',\n          },\n        ],\n        []\n    )\n\n    const {\n        getTableProps,\n        getTableBodyProps,\n        headerGroups,\n        rows,\n        prepareRow,\n      } = useTable({ columns, data })\n    \n    const renderStep = () => {\n        if (error) {\n            return <div>Error retrieving ant data</div>;\n          } else if (getDataClicked){\n            return <div>Loading ant data...</div>;\n          } else {\n            return (\n                <RowFlex>\n                <ColumnFlex>\n                <RowFlex>\n                    <Button onClick={onGetDataClick}>GET DATA</Button>\n                </RowFlex>\n                <RowFlex>\n                    <Button onClick={onStartRaceClick}>START RACE</Button>\n                </RowFlex>\n                <RowFlex>\n                    <Button onClick={runCalculation}>console RACE</Button>\n                </RowFlex>\n                <RowFlex>\n                    <Button onClick={onconsoleClick2}>console</Button>\n                </RowFlex>\n                <RowFlex>\n                    STATE OF THE RACE: {raceState}\n                </RowFlex>\n                <RowFlex>\n                <table {...getTableProps()} style={{ border: 'solid 1px black' }}>\n                    <thead>\n                        {headerGroups.map(headerGroup => (\n                        <tr {...headerGroup.getHeaderGroupProps()}>\n                            {headerGroup.headers.map(column => (\n                            <th\n                                {...column.getHeaderProps()}\n                                style={{\n                                background: 'aliceblue',\n                                color: 'black',\n                                fontWeight: 'bold',\n                                }}\n                            >\n                                {column.render('Header')}\n                            </th>\n                            ))}\n                        </tr>\n                        ))}\n                    </thead>\n                    <tbody {...getTableBodyProps()}>\n                        {rows.map(row => {\n                        prepareRow(row)\n                        return (\n                            <tr {...row.getRowProps()}>\n                            {row.cells.map(cell => {\n                                return (\n                                <td\n                                    {...cell.getCellProps()}\n                                    style={{\n                                    padding: '10px'\n                                    }}\n                                >\n                                    {cell.render('Cell')}\n                                </td>\n                                )\n                            })}\n                            </tr>\n                        )\n                        })}\n                    </tbody>\n                    </table>\n                </RowFlex>\n                <RowFlex>\n                  <Calculation ant={ants[0]} index={0} />\n                </RowFlex>\n                </ColumnFlex>\n                </RowFlex>\n            );\n          }\n    }\n\n  return (\n    <Screen>\n        {renderStep()}\n    </Screen>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}